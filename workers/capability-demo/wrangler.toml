name = "capability-demo"
main = "build/worker/shim.mjs"
compatibility_date = "2024-01-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[vars]
ENVIRONMENT = "production"
RATE_LIMIT = "30"
RATE_WINDOW_SECONDS = "60"

# kv namespace for rate limiting
# shared with rate-limiter worker
[[kv_namespaces]]
binding = "RATES"
id = "d1d97b8ad75341b7b79a41e429b8c30d"

[env.preview]
name = "capability-demo-preview"

[env.preview.vars]
ENVIRONMENT = "preview"
RATE_LIMIT = "30"
RATE_WINDOW_SECONDS = "60"

[[env.preview.kv_namespaces]]
binding = "RATES"
id = "d1d97b8ad75341b7b79a41e429b8c30d"
